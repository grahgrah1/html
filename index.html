<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cash Jump x Gold Bar üßæü™ô</title>
  <style>
    body{
      margin:0;
      background:#111;
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
      font-family: system-ui, -apple-system, "Prompt", sans-serif;
      color:#ffd700;
      padding:16px;
      user-select:none;
      -webkit-user-select:none;
      touch-action: manipulation;
    }
    .wrap{ width:min(920px, 100%); text-align:center; }
    h1{ margin:0 0 8px; text-shadow:0 0 10px rgba(255,215,0,.6); font-size:22px; }
    .hint{ margin:0 0 12px; color:#ddd; font-size:14px; }
    canvas{
      width:100%;
      max-width:920px;
      aspect-ratio: 16 / 6;
      background: linear-gradient(#300, #111);
      border-radius:16px;
      box-shadow:0 0 20px rgba(255,215,0,.35);
      border:1px solid rgba(255,215,0,.25);
      display:block;
      margin:0 auto;
      touch-action: none;
    }
    .bar{
      display:flex; gap:10px; justify-content:center; flex-wrap:wrap;
      margin: 10px 0 0;
    }
    button{
      font-size:16px;
      padding:10px 16px;
      border:none;
      border-radius:12px;
      cursor:pointer;
      background: linear-gradient(45deg, #d4af37, #ffcc00);
      color:#111;
      box-shadow:0 0 12px rgba(255,204,0,.35);
    }
    .hud{ margin-top:10px; color:#eee; font-size:14px; }
    .hud b{ color:#00ff99; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>üßæ ‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡∏Ç‡πâ‡∏≤‡∏°‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÅ‡∏ó‡πà‡∏á ü™ô</h1>
    <p class="hint">‡∏Ñ‡∏•‡∏¥‡∏Å/‡πÅ‡∏ï‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏° = ‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î ‚Ä¢ ‡∏ä‡∏ô‡∏ó‡∏≠‡∏á‡πÅ‡∏ó‡πà‡∏á = ‡∏à‡∏ö‡πÄ‡∏Å‡∏°</p>

    <canvas id="game" width="960" height="360"></canvas>

    <div class="bar">
      <button id="startBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
      <button id="restartBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
      <button id="autostartBtn">‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡∏¥‡πà‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</button>
    </div>

    <div class="hud">
      ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <b id="score">0</b> ‚Ä¢ ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: <b id="best">0</b> ‚Ä¢ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: <b id="state">‡∏û‡∏£‡πâ‡∏≠‡∏°</b>
    </div>
  </div>

<script>
(() => {
  const canvas = document.getElementById("game");
  const ctx = canvas.getContext("2d");

  const scoreEl = document.getElementById("score");
  const bestEl  = document.getElementById("best");
  const stateEl = document.getElementById("state");
  const startBtn = document.getElementById("startBtn");
  const restartBtn = document.getElementById("restartBtn");
  const autostartBtn = document.getElementById("autostartBtn");

  const W = canvas.width, H = canvas.height;
  const groundY = Math.floor(H * 0.78);

  const BEST_KEY = "cashjump_best";
  let best = Number(localStorage.getItem(BEST_KEY) || 0);
  bestEl.textContent = best.toLocaleString();

  let running = false;
  let gameOver = false;
  let autoStart = false;

  let frame = 0;
  let score = 0;
  let speed = 6.0;

  // üßæ Player = banknote
  const player = {
    x: Math.floor(W * 0.12),
    y: groundY - 44,
    w: 64,
    h: 44,
    vy: 0,
    onGround: true
  };

  // ü™ô Obstacles = gold bars
  const goldBars = [];
  let spawnTick = 0;

  function reset(){
    running = autoStart;          // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î autostart ‡∏à‡∏∞‡∏ß‡∏¥‡πà‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    gameOver = false;
    frame = 0;
    score = 0;
    speed = 6.0;
    player.y = groundY - player.h;
    player.vy = 0;
    player.onGround = true;
    goldBars.length = 0;
    spawnTick = 0;
    scoreEl.textContent = "0";
    stateEl.textContent = running ? "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô" : "‡∏û‡∏£‡πâ‡∏≠‡∏°";
    draw();
    if (running) loop();
  }

  function jump(){
    if (!running || gameOver) return;
    if (player.onGround){
      player.vy = -15.5;
      player.onGround = false;
    }
  }

  function spawnGoldBar(){
    const scale = 1 + Math.min(0.25, speed / 50);
    const w = 56 * scale;
    const h = 26 * scale;

    goldBars.push({
      x: W + 30,
      y: groundY - h,
      w, h
    });
  }

  function hit(a,b){
    return a.x < b.x + b.w &&
           a.x + a.w > b.x &&
           a.y < b.y + b.h &&
           a.y + a.h > b.y;
  }

  function end(){
    running = false;
    gameOver = true;
    stateEl.textContent = "‡∏à‡∏ö‡πÄ‡∏Å‡∏°";
    if (score > best){
      best = Math.floor(score);
      localStorage.setItem(BEST_KEY, String(best));
      bestEl.textContent = best.toLocaleString();
    }
  }

  function start(){
    if (gameOver) return;
    running = true;
    stateEl.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô";
    loop();
  }

  function restart(){
    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà auto-start
    const keepAuto = autoStart;
    autoStart = keepAuto;
    reset();
  }

  function update(){
    if (!running) return;

    frame++;
    speed += 0.0010;
    score += 0.65;

    // gravity
    player.vy += 0.92;
    player.y += player.vy;

    if (player.y >= groundY - player.h){
      player.y = groundY - player.h;
      player.vy = 0;
      player.onGround = true;
    }

    // spawn gold bars (‡∏ñ‡∏µ‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß)
    spawnTick++;
    const every = Math.max(52, 95 - Math.floor(speed * 6));
    if (spawnTick >= every){
      spawnGoldBar();
      spawnTick = 0;
    }

    // move gold bars
    for (let i = goldBars.length - 1; i >= 0; i--){
      goldBars[i].x -= speed;
      if (goldBars[i].x + goldBars[i].w < -70) goldBars.splice(i,1);
    }

    // collision
    for (const g of goldBars){
      if (hit(player, g)){
        end();
        break;
      }
    }

    scoreEl.textContent = Math.floor(score).toLocaleString();
  }

  // ---------- Drawing ----------
  function drawBackground(){
    // base gradient (‡πÅ‡∏î‡∏á-‡∏î‡∏≥)
    const bg = ctx.createLinearGradient(0,0,0,H);
    bg.addColorStop(0, "rgba(255,255,255,0.02)");
    bg.addColorStop(0.35, "rgba(255,0,0,0.10)");
    bg.addColorStop(1, "rgba(0,0,0,0.50)");
    ctx.fillStyle = bg;
    ctx.fillRect(0,0,W,H);

    // subtle sparkles
    ctx.save();
    ctx.globalAlpha = 0.08;
    ctx.fillStyle = "#ffd700";
    for(let i=0;i<40;i++){
      const x = (i*97 + frame*3) % W;
      const y = (i*53 + 30) % H;
      ctx.fillRect(x, y, 2, 2);
    }
    ctx.restore();
  }

  function drawGround(){
    ctx.strokeStyle = "rgba(255,215,0,.75)";
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(0, groundY+1);
    ctx.lineTo(W, groundY+1);
    ctx.stroke();

    // dashes
    ctx.save();
    ctx.globalAlpha = 0.45;
    ctx.strokeStyle = "rgba(255,215,0,.6)";
    ctx.lineWidth = 2;
    const dashW = 18, gap = 14;
    const offset = -((frame * speed) % (dashW + gap));
    for(let x = offset; x < W; x += (dashW + gap)){
      ctx.beginPath();
      ctx.moveTo(x, groundY+18);
      ctx.lineTo(x + dashW, groundY+18);
      ctx.stroke();
    }
    ctx.restore();
  }

  // üßæ ‡∏ß‡∏≤‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©
  function drawBanknote(){
    ctx.save();

    const x = player.x, y = player.y, w = player.w, h = player.h;

    // note body gradient (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡πà‡∏≠‡∏ô-‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏Ç‡πâ‡∏°)
    const g = ctx.createLinearGradient(x, y, x+w, y+h);
    g.addColorStop(0, "#bff5cf");
    g.addColorStop(0.5, "#5be39a");
    g.addColorStop(1, "#1aa86a");

    ctx.fillStyle = g;
    roundRect(x, y, w, h, 10);
    ctx.fill();

    // border
    ctx.strokeStyle = "rgba(0,0,0,0.35)";
    ctx.lineWidth = 2;
    roundRect(x+1, y+1, w-2, h-2, 9);
    ctx.stroke();

    // center oval
    ctx.fillStyle = "rgba(255,255,255,0.35)";
    ctx.beginPath();
    ctx.ellipse(x + w*0.52, y + h*0.55, w*0.22, h*0.28, 0, 0, Math.PI*2);
    ctx.fill();

    // "‡∏ø" symbol
    ctx.fillStyle = "rgba(0,0,0,0.45)";
    ctx.font = "700 18px system-ui, sans-serif";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillText("‡∏ø", x + w*0.52, y + h*0.55);

    // serial lines
    ctx.globalAlpha = 0.35;
    ctx.strokeStyle = "#0b5";
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(x + w*0.10, y + h*0.20);
    ctx.lineTo(x + w*0.35, y + h*0.20);
    ctx.moveTo(x + w*0.65, y + h*0.80);
    ctx.lineTo(x + w*0.90, y + h*0.80);
    ctx.stroke();

    // simple "legs" vibe (‡∏ß‡∏¥‡πà‡∏á)
    ctx.globalAlpha = 1;
    ctx.strokeStyle = "rgba(0,0,0,0.35)";
    ctx.lineWidth = 3;
    const phase = running ? Math.sin(frame*0.35) : 0;
    ctx.beginPath();
    ctx.moveTo(x + w*0.25, y + h);
    ctx.lineTo(x + w*0.25 + phase*4, y + h + 10);
    ctx.moveTo(x + w*0.75, y + h);
    ctx.lineTo(x + w*0.75 - phase*4, y + h + 10);
    ctx.stroke();

    ctx.restore();
  }

  // ü™ô ‡∏ß‡∏≤‡∏î‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÅ‡∏ó‡πà‡∏á
  function drawGoldBars(){
    for (const b of goldBars){
      const grad = ctx.createLinearGradient(b.x, b.y, b.x+b.w, b.y+b.h);
      grad.addColorStop(0, "#b8860b");
      grad.addColorStop(0.45, "#ffd700");
      grad.addColorStop(1, "#d4af37");
      ctx.fillStyle = grad;

      roundRect(b.x, b.y, b.w, b.h, 8);
      ctx.fill();

      // top shine
      ctx.save();
      ctx.globalAlpha = 0.35;
      ctx.strokeStyle = "#fff";
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(b.x+6, b.y+6);
      ctx.lineTo(b.x+b.w-10, b.y+6);
      ctx.stroke();
      ctx.restore();

      // small label
      ctx.save();
      ctx.globalAlpha = 0.55;
      ctx.fillStyle = "rgba(0,0,0,0.45)";
      ctx.font = "700 10px system-ui, sans-serif";
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      ctx.fillText("GOLD", b.x + b.w/2, b.y + b.h/2);
      ctx.restore();
    }
  }

  function drawOverlay(){
    if (running) return;
    ctx.save();
    ctx.fillStyle = "rgba(0,0,0,0.35)";
    ctx.fillRect(0,0,W,H);

    ctx.fillStyle = "#ffd700";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.font = "800 32px system-ui, sans-serif";
    ctx.fillText(gameOver ? "GAME OVER" : "‡∏Ñ‡∏•‡∏¥‡∏Å/‡πÅ‡∏ï‡∏∞ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏° + ‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î", W/2, H*0.42);

    ctx.font = "600 18px system-ui, sans-serif";
    ctx.fillStyle = "#ddd";
    ctx.fillText(gameOver ? "‡∏Å‡∏î ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢" : "‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡∏Ç‡πâ‡∏≤‡∏°‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÅ‡∏ó‡πà‡∏á", W/2, H*0.55);
    ctx.restore();
  }

  function draw(){
    ctx.clearRect(0,0,W,H);
    drawBackground();
    drawGround();
    drawGoldBars();
    drawBanknote();
    drawOverlay();
  }

  function roundRect(x,y,w,h,r){
    const rr = Math.min(r, w/2, h/2);
    ctx.beginPath();
    ctx.moveTo(x+rr, y);
    ctx.arcTo(x+w, y, x+w, y+h, rr);
    ctx.arcTo(x+w, y+h, x, y+h, rr);
    ctx.arcTo(x, y+h, x, y, rr);
    ctx.arcTo(x, y, x+w, y, rr);
    ctx.closePath();
  }

  function loop(){
    if (!running) { draw(); return; }
    update();
    draw();
    requestAnimationFrame(loop);
  }

  // Controls: click/tap only
  canvas.addEventListener("pointerdown", (e) => {
    e.preventDefault();
    if (!running && !gameOver) start();
    jump();
  });

  startBtn.addEventListener("click", start);
  restartBtn.addEventListener("click", () => { autoStart = false; reset(); });
  autostartBtn.addEventListener("click", () => { autoStart = true; reset(); });

  reset();
})();
</script>
</body>
</html>
