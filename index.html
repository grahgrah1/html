<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gold Runner ðŸª™</title>
<style>
  body{
    margin:0;
    font-family: Prompt, sans-serif;
    background:#111;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    color:#ffd700;
  }
  canvas{
    background:#222;
    border-radius:16px;
    box-shadow:0 0 20px gold;
  }
</style>
</head>
<body>

<canvas id="game" width="900" height="300"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let frame = 0;
let speed = 6;
let score = 0;
let isNight = false;

// player
const player = {
  x:80,
  y:200,
  w:40,
  h:50,
  vy:0,
  duck:false,
  onGround:true
};

// obstacles
const obs = [];

function spawnObstacle(){
  const isBird = Math.random() < 0.35;
  obs.push({
    x:canvas.width,
    y:isBird ? 160 : 220,
    w:isBird ? 35 : 30,
    h:isBird ? 20 : 40,
    bird:isBird
  });
}

function update(){
  frame++;
  speed += 0.0005;
  score++;

  // day / night
  if(frame % 600 === 0) isNight = !isNight;

  // gravity
  player.vy += 1;
  player.y += player.vy;
  if(player.y >= 200){
    player.y = 200;
    player.vy = 0;
    player.onGround = true;
  }

  // spawn
  if(frame % 90 === 0) spawnObstacle();

  // move obstacles
  for(let i=obs.length-1;i>=0;i--){
    obs[i].x -= speed;
    if(obs[i].x < -50) obs.splice(i,1);
  }

  // collision
  for(const o of obs){
    if(
      player.x < o.x + o.w &&
      player.x + player.w > o.x &&
      player.y < o.y + o.h &&
      player.y + player.h > o.y
    ){
      alert("GAME OVER\nà¸„à¸°à¹à¸™à¸™: "+score);
      location.reload();
    }
  }
}

function draw(){
  // background
  ctx.fillStyle = isNight ? "#050505" : "#222";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // moon / sun
  ctx.fillStyle = isNight ? "#ccc" : "#ffcc00";
  ctx.beginPath();
  ctx.arc(750,60,25,0,Math.PI*2);
  ctx.fill();

  // ground
  ctx.strokeStyle = "#ffd700";
  ctx.beginPath();
  ctx.moveTo(0,260);
  ctx.lineTo(canvas.width,260);
  ctx.stroke();

  // player
  ctx.fillStyle = "#ffd700";
  let h = player.duck ? 30 : 50;
  ctx.fillRect(player.x, player.y + (50-h), player.w, h);

  // obstacles
  for(const o of obs){
    ctx.fillStyle = o.bird ? "#ff6666" : "#d4af37";
    ctx.fillRect(o.x,o.y,o.w,o.h);
  }

  // score
  ctx.fillStyle="#fff";
  ctx.font="18px sans-serif";
  ctx.fillText("Score: "+score,20,30);
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}

document.addEventListener("keydown",e=>{
  if(e.code==="Space" && player.onGround){
    player.vy = -16;
    player.onGround = false;
  }
  if(e.code==="ArrowDown"){
    player.duck = true;
  }
});

document.addEventListener("keyup",e=>{
  if(e.code==="ArrowDown"){
    player.duck = false;
  }
});

loop();
</script>

</body>
</html>
